let canvas=document.querySelector(".editor"),ctx=canvas.getContext("2d"),input=document.querySelector(".editor__input"),btn=document.querySelector(".editor__btn"),check=document.querySelector(".editor__check"),jscolor=document.querySelector(".jscolor"),controls=document.querySelector(".editor__controls"),w=canvas.width=window.innerWidth,h=canvas.height=window.innerHeight,amount=input.value;click=0,tick=0,dots=[],lines=[],colors=[];let draw=e=>{dots.forEach((t,o)=>{if(ctx.beginPath(),t.picker&&o<=e||t.picker&&o>=e?ctx.fillStyle=t.color:!t.picker&&o<e?ctx.fillStyle=dots[0].color:!t.picker&&o>=e&&(ctx.fillStyle=dots[o].color),ctx.arc(t.x,t.y,t.radius,0,2*Math.PI),ctx.fill(),ctx.closePath(),o>0&&o<e&&(ctx.beginPath(),ctx.lineWidth=t.width,t.picker?ctx.strokeStyle=t.color:ctx.strokeStyle=dots[0].color,ctx.moveTo(dots[o-1].x,dots[o-1].y),ctx.lineTo(t.x,t.y),ctx.stroke(),ctx.closePath()),o>=e){ctx.beginPath(),ctx.lineWidth=t.width,t.picker?ctx.strokeStyle=t.color:ctx.strokeStyle=dots[o].color;for(let c=1;c<=e;c++)ctx.moveTo(dots[o-c].x,dots[o-c].y),ctx.lineTo(t.x,t.y);ctx.stroke(),ctx.closePath()}})};function drawLine(e){click>0&&TweenLite.fromTo(e,1,{x:dots[click-1].x,y:dots[click-1].y},{x:dots[click].x,y:dots[click].y})}function render(){ctx.clearRect(0,0,w,h),dots.length>0&&draw(amount),tick++}function random(e,t){return null==t&&(t=e,e=0),e+Math.random()*(t-e)}canvas.onclick=(e=>{dots.push({x:e.pageX,y:e.pageY-controls.clientHeight,radius:5,minRadius:3,maxRadius:10,color:check.checked?`#${jscolor.value}`:getRandomColor(),picker:!!check.checked,width:5}),amount=input.value,"FFFFFF"==jscolor.value&&(jscolor.value="000000"),check.checked?colors.push(`#${jscolor.value}`):colors.push(getRandomColor()),dots.forEach(changeRadius),dots.forEach(changeWidth),drawLine(dots[dots.length-1]),click++}),TweenLite.ticker.addEventListener("tick",render),input.addEventListener("input",e=>{input.value=e.target.value}),jscolor.addEventListener("change",e=>{jscolor.value=e.target.value}),btn.addEventListener("click",()=>{ctx.clearRect(0,0,w,h),click=0,colors=[],dots=[]}),window.addEventListener("resize",()=>{w=canvas.width=window.innerWidth,h=canvas.height=window.innerHeight});let getRandomColor=()=>{let e="#";for(let t=0;t<6;t++)e+="0123456789ABCDEF"[Math.floor(16*Math.random())];return e};function changeRadius(e){for(let t=0;t<e.maxRadius;t++)TweenLite.to(e,random(2.5,3.5),{radius:t,ease:Elastic.easeOut.config(2,.3)}),TweenLite.to(e,random(2.5,3.5),{color:e.picker?e.color:getRandomColor(),ease:Power0.easeNone,onComplete:changeRadius,onCompleteParams:[e]})}function changeWidth(e){for(let t=3;t<10;t++)TweenLite.to(e,random(2.5,3.5),{width:t,ease:Elastic.easeOut.config(2,.3),ease:Power0.easeNone,onComplete:changeWidth,onCompleteParams:[e]})}