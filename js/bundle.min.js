let canvas=document.querySelector(".editor"),ctx=canvas.getContext("2d"),input=document.querySelector(".editor__input"),btn=document.querySelector(".editor__btn"),check=document.querySelector(".editor__check"),jscolor=document.querySelector(".jscolor"),controls=document.querySelector(".editor__controls"),w=canvas.width=window.innerWidth,h=canvas.height=window.innerHeight,amount=input.value;function drawLine(e){click>0&&TweenLite.fromTo(e,1,{x:dots[click-1].x,y:dots[click-1].y},{x:dots[click].x,y:dots[click].y})}click=0,tick=0,dots=[],lines=[],colors=[];let draw=e=>{dots.forEach((o,t)=>{if(ctx.beginPath(),colors.includes(`#${jscolor.value}`)&&t<e||colors.includes(`#${jscolor.value}`)&&t>e?ctx.fillStyle=colors[t]:!colors.includes(`#${jscolor.value}`)&&t<e?ctx.fillStyle=dots[0].color:!colors.includes(`#${jscolor.value}`)&&t>=e&&(ctx.fillStyle=dots[t-1].color),ctx.arc(o.x,o.y,o.radius,0,2*Math.PI),ctx.fill(),ctx.closePath(),t>0&&t<e&&(ctx.beginPath(),ctx.lineWidth=o.width,colors.includes(`#${jscolor.value}`)?ctx.strokeStyle=colors[t]:ctx.strokeStyle=dots[0].color,ctx.moveTo(dots[t-1].x,dots[t-1].y),ctx.lineTo(o.x,o.y),ctx.stroke(),ctx.closePath()),t>=e){ctx.beginPath(),ctx.lineWidth=o.width,colors.includes(`#${jscolor.value}`)?ctx.strokeStyle=colors[t]:ctx.strokeStyle=dots[t-1].color;for(let c=1;c<=e;c++)ctx.moveTo(dots[t-c].x,dots[t-c].y),ctx.lineTo(o.x,o.y);ctx.stroke(),ctx.closePath()}})};function render(){ctx.clearRect(0,0,w,h),dots.length>0&&draw(amount),tick++}function random(e,o){return null==o&&(o=e,e=0),e+Math.random()*(o-e)}canvas.onclick=(e=>{dots.push({x:e.pageX,y:e.pageY-controls.clientHeight,radius:5,minRadius:3,maxRadius:10,color:getRandomColor(),width:5}),amount=input.value,"FFFFFF"==jscolor.value&&(jscolor.value="000000"),check.checked?colors.push(`#${jscolor.value}`):colors.push(getRandomColor()),dots.forEach(changeRadius),dots.forEach(changeWidth),drawLine(dots[dots.length-1]),click++}),TweenLite.ticker.addEventListener("tick",render),input.addEventListener("input",e=>{input.value=e.target.value}),jscolor.addEventListener("change",e=>{jscolor.value=e.target.value}),btn.addEventListener("click",()=>{ctx.clearRect(0,0,w,h),click=0,colors=[],dots=[]}),window.addEventListener("resize",()=>{w=canvas.width=window.innerWidth,h=canvas.height=window.innerHeight});let getRandomColor=()=>{let e="#";for(let o=0;o<6;o++)e+="0123456789ABCDEF"[Math.floor(16*Math.random())];return e};function changeRadius(e){for(let o=0;o<e.maxRadius;o++)TweenLite.to(e,random(2.5,3.5),{radius:o,ease:Elastic.easeOut.config(2,.3)}),TweenLite.to(e,random(2.5,3.5),{color:getRandomColor(),ease:Power0.easeNone,onComplete:changeRadius,onCompleteParams:[e]})}function changeWidth(e){for(let o=3;o<10;o++)TweenLite.to(e,random(2.5,3.5),{width:o,ease:Elastic.easeOut.config(2,.3),ease:Power0.easeNone,onComplete:changeWidth,onCompleteParams:[e]})}